<html> 
<head>
		<link rel="stylesheet" type="text/css" href="style.css">
		<script src="paho-mqtt.js"></script>
		
</head>
	<body>
	<div class="label"> 
	   Product Name: <input type="text" name="qname" id="prodname" placeholder="Epic TM Vascular"/><br>
          Box Name: <input type="text" name="bname" id="boxname" placeholder="OVER-THE-WIRE"/><br>
	   Under Box Name: <input type="text" name="cname" id="underboxname"  placeholder="Self-Expanding Stent System"/><br>
	   Description: <input type="text" name="dname" id="description" placeholder="Product Description: The Epic Vascular Self-Expanding Stent \n  System (Epic Stent System) is comprised of two components: \n  the implantable endoprosthesis and the stent delivery system."/><br>
	   IFU: <input type="text" name="ename" id="ifu" placeholder="The current instructions for use are available on the web at \n  www.bostonscientific.com/Epic."/><br>
	   Size Top: <input type="text" name="fname" id="top" placeholder="10 mm"/><br>
	   Size Middle: <input type="text" name="gname" id="middle" placeholder="x 80 mm"/><br>
	   Size Bottom: <input type="text" name="hname" id="bottom" placeholder="75 cm"/><br>
<!-- 	   First name: <input type="text" name="iname" id="input_label" /><br>
	   First name: <input type="text" name="jname" id="input_label" /><br>
	   First name: <input type="text" name="kname" id="input_label" /><br>
	   First name: <input type="text" name="lname" id="input_label" /><br>
	   First name: <input type="text" name="mname" id="input_label" /><br>
	   First name: <input type="text" name="nname" id="input_label" /><br>  -->
<!--  product_name = "Epic   Vascular";
 box_name = "OVER-THE-WIRE";
 under_box_name = ;
 description =  "Product Description: The Epic Vascular Self-Expanding Stent \n  System (Epic Stent System) is comprised of two components: \n  the implantable endoprosthesis and the stent delivery system.";
 ifu =  "The current instructions for use are available on the web at \n  www.bostonscientific.com/Epic."; 
 size_top = "10 mm";
 size_middle = "x 80 mm";
 size_bottom = "75 cm" ; -->
		<button type="button" id="Upload Label" onClick="sendMessage()">Upload Label</button>
	</div>
	</body>
	<script>
			// Create a client instance
			client = new Paho.MQTT.Client("m14.cloudmqtt.com", 36069, "jsclient");
			

			// set callback handlers
			client.onConnectionLost = onConnectionLost;
			client.onMessageArrived = onMessageArrived;

			// connect the client
			//client.connect({onSuccess:onConnect});
			client.connect({
				onSuccess: onConnect, 
				userName : "xuijrmgi",
				password : "xfTp6umWY9od",
				cleanSession: true,
				useSSL: true
			});

			// called when the client connects
			function onConnect() {
			  // Once a connection has been made, make a subscription and send a message.
			  console.log("onConnect");
			  client.subscribe("pahodemo", {qos: 1});			  
			}

			// called when the client loses its connection
			function onConnectionLost(responseObject) {
			  if (responseObject.errorCode !== 0) {
				console.log("onConnectionLost:"+responseObject.errorMessage);
			  }
			}

			// called when a message arrives
			function onMessageArrived(message) {
			  console.log("onMessageArrived:"+message.payloadString);
			}
			
			function sendMessage() {
			var prodname = document.getElementById("prodname").value;
			var boxname = document.getElementById("boxname").value;
			var underboxname = document.getElementById("underboxname").value;
			var description = document.getElementById("description").value;
			var ifu = document.getElementById("ifu").value;
			var top = document.getElementById("top").value;
			var middle = document.getElementById("middle").value;
			var bottom = document.getElementById("bottom").value;

			console.log("input" + prodname);
// 			  var j = '{ "productName" : ' + prodname
// 			  		+ ', "boxName" : ' + boxname + '
// 			  		, "underBoxName" : ' + underboxname + ', "desc": ' + desc + '
// 			  		, "ifuDesc" + ifu + '
// 			  		, "top"  + top + '
// 			  		, "middle" " ' + middle + '
// 			  		, "bottom" " ' + bottom + '}';
				
			var j = '{ "productName" : ' + prodname + ', "boxName" : ' + boxname+ 
			    ', "underBoxName" : ' + underboxname + ', "desc":' + description + 
			    ',"ifuDesc" :' + ifu +', "top" : ' + top + ', "middle" : ' +middle + 
			    ',"bottom" : ' +bottom + '}';
			  message = new Paho.MQTT.Message(j);
			  message.destinationName = "pahodemo";
			  client.send(message);
			  console.log("sendMessage:" + j);
			}
		
		</script>

</html>
