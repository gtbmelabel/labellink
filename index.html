<html> 
<head>
		<link rel="stylesheet" type="text/css" href="style.css">
		<script src="paho-mqtt.js"></script>
		
</head>
	<body>
	<div class="label"> 
	   Product Name: <input type="text" name="qname" id="prodname" placeholder="Epic TM Vascular"/><br>
          Box Name: <input type="text" name="bname" id="boxname" /><br>
	   Under Box Name: <input type="text" name="cname" id="underboxname" /><br>
	   Description: <input type="text" name="dname" id="description" /><br>
	   IFU: <input type="text" name="ename" id="ifu" /><br>
	   Size Top: <input type="text" name="fname" id="top" /><br>
	   Size Middle: <input type="text" name="gname" id="middle" /><br>
	   Size Bottom: <input type="text" name="hname" id="bottom" /><br>
<!-- 	   First name: <input type="text" name="iname" id="input_label" /><br>
	   First name: <input type="text" name="jname" id="input_label" /><br>
	   First name: <input type="text" name="kname" id="input_label" /><br>
	   First name: <input type="text" name="lname" id="input_label" /><br>
	   First name: <input type="text" name="mname" id="input_label" /><br>
	   First name: <input type="text" name="nname" id="input_label" /><br>  -->
<!--  product_name = "Epic   Vascular";
 box_name = "OVER-THE-WIRE";
 under_box_name = "Self-Expanding Stent System";
 description =  "Product Description: The Epic Vascular Self-Expanding Stent \n  System (Epic Stent System) is comprised of two components: \n  the implantable endoprosthesis and the stent delivery system.";
 ifu =  "The current instructions for use are available on the web at \n  www.bostonscientific.com/Epic."; 
 size_top = "10 mm";
 size_middle = "x 80 mm";
 size_bottom = "75 cm" ; -->
		<button type="button" id="Upload Label" onClick="sendMessage()">Upload Label</button>
	</div>
	</body>
	<script>
			// Create a client instance
			client = new Paho.MQTT.Client("m14.cloudmqtt.com", 36069, "jsclient");
			

			// set callback handlers
			client.onConnectionLost = onConnectionLost;
			client.onMessageArrived = onMessageArrived;

			// connect the client
			//client.connect({onSuccess:onConnect});
			client.connect({
				onSuccess: onConnect, 
				userName : "xuijrmgi",
				password : "xfTp6umWY9od",
				cleanSession: true,
				useSSL: true
			});

			// called when the client connects
			function onConnect() {
			  // Once a connection has been made, make a subscription and send a message.
			  console.log("onConnect");
			  client.subscribe("pahodemo", {qos: 1});			  
			}

			// called when the client loses its connection
			function onConnectionLost(responseObject) {
			  if (responseObject.errorCode !== 0) {
				console.log("onConnectionLost:"+responseObject.errorMessage);
			  }
			}

			// called when a message arrives
			function onMessageArrived(message) {
			  console.log("onMessageArrived:"+message.payloadString);
			}
			
			function sendMessage() {
			var input = document.getElementById("input_label").value;

			console.log("input" + input);
			  var j = '{ "test" : ' + input+ '}';
			  message = new Paho.MQTT.Message(j);
			  message.destinationName = "pahodemo";
			  client.send(message);
			  console.log("sendMessage:" + j);
			}
		
		</script>

</html>
